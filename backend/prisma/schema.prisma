// This is your Prisma schema file
// Learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  password  String
  phone     String?
  role      String   @default("user") // "user" or "admin"
  bookings  Booking[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model Tour {
  id          String    @id @default(uuid())
  title       String
  location    String
  duration    Int       // in days
  price       Decimal   @db.Decimal(10, 2)
  type        String    // e.g., "Adventure", "Cultural", etc.
  groupSize   Int
  difficulty  String    // e.g., "Easy", "Moderate", "Challenging"
  status      String    @default("active") // "active" or "inactive"
  description String    @db.Text
  overview    String    @db.Text
  highlights  Json      // Array of strings
  itinerary   Json      // Array of day-by-day activities
  inclusions  Json      // Array of included items
  exclusions  Json      // Array of excluded items
  image       String?   // Main image URL
  gallery     Json?     // Array of image URLs
  bookings    Booking[]
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("tours")
}

model Booking {
  id         String   @id @default(uuid())
  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  tourId     String
  tour       Tour     @relation(fields: [tourId], references: [id], onDelete: Cascade)
  travelDate DateTime
  travelers  Int
  totalPrice Decimal  @db.Decimal(10, 2)
  status     String   @default("pending") // "pending" | "confirmed" | "cancelled" | "completed"
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("bookings")
}

// Payment model will be added later when implementing payments
// model Payment {
//   id         String   @id @default(uuid())
//   bookingId  String
//   booking    Booking  @relation(fields: [bookingId], references: [id])
//   amount     Decimal  @db.Decimal(10, 2)
//   status     String   // e.g., "pending", "completed", "failed"
//   method     String   // e.g., "credit_card", "paypal", etc.
//   reference  String   @unique
//   createdAt  DateTime @default(now())
//   updatedAt  DateTime @updatedAt
// }
